{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/javascript/코드를 값으로 다루어 표현력 높이기/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>go</h2>\n<blockquote>\n<p>인자로 함수리스트를 받아 첫 번째 인자값을 초기값으로 하여, 두 번째 인자부터 함수들의 리스트를 받아 함수를 실행하여 얻은 <strong>반환 값을 다음 함수로 넘겨</strong> 함수를 리턴한다.</p>\n</blockquote>\n<h3>예제</h3>\n<ul>\n<li>요구사항\n<ul>\n<li>111과 같은 결과를 출력하는 함수를 작성하시오.</li>\n</ul>\n</li>\n</ul>\n<p>첫 번째 인자가 <code>0</code> 인 아래 로직에서 두번째 인자인 <code>a => a + 1</code> 함수에 <code>0</code> 이 전달되고, 이 함수의 반환값인 <code>1</code> 을 다음 <code>a => a + 10</code> 으로 전달한다.</p>\n<p>이와 같이 인자에 전달된 함수 리스트를 모두 순환할 때까지 해당 과정을 반복하여 축약된 결과인 <code>111</code> 이 최종적으로 출력된다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"one-dark\"  >\n          <code slot=\"code\">const go = (...args) =&gt; reduce((a, f) =&gt; f(a), args);\n\ngo(\n\t0,\n\ta =&gt; a + 1,\n\ta =&gt; a + 10,\n\ta =&gt; a + 100,\n\tlog);   // 111</code>\n        </deckgo-highlight-code>\n<h2>pipe</h2>\n<blockquote>\n<p>go 함수와의 가장 큰 차이점은 go는 인자값으로 들어온 함수에서 즉시실행하여 결과값을 반환해 다음 함수로 전달한다면 pipe 함수는 함수 자체를 반환하여 최종적으로 인자값으로 받은 함수리스트를 합성해서 합성된 합수를 가지고 로직을 수행합니다.</p>\n</blockquote>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"one-dark\"  >\n          <code slot=\"code\">const pipe = (...fs) =&gt; (a) =&gt; go(a, ...fs);\nconst f = pipe(\n    a =&gt; a + 1,\n    a =&gt; a + 10,\n    a =&gt; a + 100\n);\n\nf(0);  // 111</code>\n        </deckgo-highlight-code>\n<ul>\n<li>pipe 기능 추가\n<ul>\n<li>위에서 구현한 pipe함수는 인자 값을 하나만 받기 때문에 여러개 인자를 사용하기에 복잡하기 때문에, 여러 개 인자를 받을 수 있도록 구현</li>\n</ul>\n</li>\n</ul>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"one-dark\"  >\n          <code slot=\"code\">const pipe = (f, ...fs) =&gt; (...as) =&gt; go(f(...as), ...fs);\n\nconst f = pipe(\n\t(a, b) =&gt; a + b,\n\ta =&gt; a + 10,\n\ta =&gt; a + 100\n);\n\nf(0, 1);</code>\n        </deckgo-highlight-code>\n<p>인자값을 하나만 보내고 싶으면 pipe함수의 첫 번째 인자값을 <code>a => a</code>로 해주면 문제없이 잘 동작한다.</p>\n<h2>go를 사용하여 읽기 좋은 코드로 만들기</h2>\n<p>map, filter, reduce 중첩 사용시 사용했던 아래 코드를 go를 사용하여 가독성 높은 코드로 리팩토링 해보자.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"one-dark\"  >\n          <code slot=\"code\">reduce(add, 0, map(p =&gt; p.price, filter(p =&gt; p.price &lt; 30000, books)))</code>\n        </deckgo-highlight-code>\n<ul>\n<li>리팩토링 결과</li>\n</ul>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"one-dark\"  >\n          <code slot=\"code\">go(\n    books,\n    books =&gt; filter(p =&gt; p.price &lt; 30000, books),\n    books =&gt; map(p =&gt; p.price, books),\n    prices =&gt; reduce(add, prices),\n    log\n);</code>\n        </deckgo-highlight-code>\n<p>코드 라인수는 증가했지만 가독성은 높아졌다. books를 첫번째 인자로 받아 <code>fillter, map, reduce</code> 를 차례로 수행하고 마지막 <code>log</code> 로 출력한다.</p>\n<h2>go + curry를 사용하여 더 읽기 좋은 코드로 만들기</h2>\n<h3>currying이란?</h3>\n<p>여러 개의 인자를 가진 함수를 호출하는 경우, 파라미터의 수보다 적은 수의 파라미터를 인자로 받으면 누락된 파라미터를 인자로 받는 기법.</p>\n<p>즉, 커링은 함수 하나가 n개의 인자를 받는 과정을 n개의 함수로 각각의 인자를 받도록 하는 것이다.</p>\n<p>예를 들면, <code>f(a, b, c)</code> 처럼 단일 호출로 처리하는 함수를 <code>f(a)(b)(c)</code> 형식으로 변환하는 것을 말한다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"one-dark\"  >\n          <code slot=\"code\">function curry(f) { // 커링 변환을 하는 curry(f) 함수\n  return function(a) {\n    return function(b) {\n      return f(a, b);\n    };\n  };\n}\n\n// usage\nfunction sum(a, b) {\n  return a + b;\n}\n\nlet curriedSum = curry(sum);\n\nlog(curriedSum(1)(2));</code>\n        </deckgo-highlight-code>\n<p><strong>‼️ 주의</strong></p>\n<p>: <strong>커링 함수에서 인자의 순서는 매우 중요하다. 앞에 있는 인자일수록 변동가능성이 낮아야하고 뒤로갈수록 변동가능성이 높아야한다. 그렇기 때문에 커링 함수를 만들 때 인자 순서를 잘 고려해서 구현해야 한다 !!</strong></p>\n<h3>Curry 함수 만들어보기</h3>\n<p>curry 함수는 인자값으로 함수(f)를 받아서 함수를 리턴한다. 반환된 함수가 실행되었을 때 인자값이 2개 이상인 경우 즉시 함수(<code>f(a, ..._)</code>)를  실행하고, 2개 미만일 경우 함수(<code>(..._) => f(a, ..._)</code>)를 다시 반환 후 가지고 있다가 나중에 인자값(<code>…_</code>)을 받으면 받아놨던 인자(<code>f(a)</code>)와 합쳐 실행한다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"one-dark\"  >\n          <code slot=\"code\">const curry = f =&gt; (a, ..._) =&gt; _.length ? f(a, ..._) : (..._) =&gt; f(a, ..._);</code>\n        </deckgo-highlight-code>\n<h3>예제 코드</h3>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"one-dark\"  >\n          <code slot=\"code\">const mult = curry((a, b) =&gt; a * b);\n\nlog(mult);        // (a, ..._) =&gt; _.length ? f(a, ..._) : (..._) =&gt; f(a, ..._);\nlog(mult(3));     // (..._) =&gt; f(3, ..._);\nlog(mult3(10));   // 30\nlog(mult3(3)(5)); // 15\nlog(mult3(3, 5)); // 15</code>\n        </deckgo-highlight-code>\n<h2>map+filter+reduce 중첩 함수를 Currying으로 리팩토링</h2>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"one-dark\"  >\n          <code slot=\"code\">const map = curry((f, iter) =&gt; {\n\tlet res = [];\n\tfor (const a of iter) {\n\t\tres.push(f(a));\n\t}\n\n\treturn res;\n});\n\n// filter, reduce함수도 동일하게 적용\n\ngo(\n\tproducts,\n\tproducts =&gt; filter(p =&gt; p.price &lt;= 20000)(products),\n\tproducts =&gt; map(p =&gt; p.price)(products),\n\tprices =&gt; reduce(add)(prices),\n\tconsole.log\n);</code>\n        </deckgo-highlight-code>\n<ul>\n<li>각 함수에 products, prices등을 인자로 받아 함수에서 2차 함수로 해당 파라미터를 넣어주고있다. 이것은 하나로 합칠 수 있다.</li>\n</ul>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"one-dark\"  >\n          <code slot=\"code\">go(\n\tproducts,\n\tfilter(p =&gt; p.price &lt;= 20000),\n\tmap(p =&gt; p.price),\n\treduce(add),\n\tconsole.log\n);</code>\n        </deckgo-highlight-code>\n<p>예제로 작성하진 않았지만 20000원 이하의 제품의 총액을 반환하는 예제를 구현하였는데 해당 조건을 변경하고 여러가지 기능을 구현할 수 있으므로 <strong>중복되는 내용을 필요에 따라 함수로 분리하여(=모듈화)</strong> 더 간결하게 표현한다.</p>\n<deckgo-highlight-code language=\"jsx\" terminal=\"carbon\" theme=\"one-dark\"  >\n          <code slot=\"code\">const total_price = pipe(\n\t\tmap(p =&gt; p.price),\n\t\treduce(add));\n\nconst base_total_price = predi =&gt; pipe(\n\tfilter(predi),\n\ttotal_price,\n);\n\ngo(\n\tproducts,\n\tbase_total_price(p =&gt; p.price &lt;= 20000),\n\tconsole.log\n);</code>\n        </deckgo-highlight-code>","frontmatter":{"title":"코드를 값으로 다루어 표현력 높이기","date":"2022년 9월 18일 오후 5:25","categories":["JavaScript"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtUlEQVQoz62Saw6CMBCEe/9zqCA+kGcBNcZoCMZzgKUoHmFMiyRGF8WEH5vdbqZfZ9NlllFgyGBUczrJybpL8xewPVMAqse6RC3EGDV5ZhYwx/kH/B3KKBfq4twqkKU1dtsr0mONw/6GTVLhfLpjHVf6IQpKOlRunKUA90sEbonQa7LnCCSRhGMLrek1snK3WlwQc4nQLzVUgfizVhEFEq4tvgNfR27rX0F9GOu7Dn1Xhw292A/qOIUsxC2D2QAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/a25bc98868a5250275dca94ceb0ed828/fdc73/code_as_value.png","srcSet":"/static/a25bc98868a5250275dca94ceb0ed828/3d9cb/code_as_value.png 183w,\n/static/a25bc98868a5250275dca94ceb0ed828/e9c2e/code_as_value.png 365w,\n/static/a25bc98868a5250275dca94ceb0ed828/fdc73/code_as_value.png 730w,\n/static/a25bc98868a5250275dca94ceb0ed828/f1fe2/code_as_value.png 1460w","sizes":"(min-width: 730px) 730px, 100vw"},"sources":[{"srcSet":"/static/a25bc98868a5250275dca94ceb0ed828/80a11/code_as_value.webp 183w,\n/static/a25bc98868a5250275dca94ceb0ed828/2e3bd/code_as_value.webp 365w,\n/static/a25bc98868a5250275dca94ceb0ed828/e25d7/code_as_value.webp 730w,\n/static/a25bc98868a5250275dca94ceb0ed828/49049/code_as_value.webp 1460w","type":"image/webp","sizes":"(min-width: 730px) 730px, 100vw"}]},"width":730,"height":382}}}},"timeToRead":3}}]}},"pageContext":{"slug":"/javascript/코드를 값으로 다루어 표현력 높이기/"}},
    "staticQueryHashes": ["3764592887"]}